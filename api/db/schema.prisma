datasource db {
  provider = "mysql"
  url      = env("MYSQL_URL")
}
// in .env file, define MYSQL_URL as:
// MYSQL_URL="mysql://root:ESCAPED_ROOT_PASSWORD@localhost:3306/agile_weather"

generator client {
  provider      = "prisma-client-js"
  binaryTargets = "native"
  previewFeatures = ["interactiveTransactions"]
}

// Define your own datamodels here and run `yarn redwood prisma migrate dev`
// to create migrations for them and apply to your dev DB.
// TODO: Please remove the following example:
model UserExample {
  id    Int     @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime? @updatedAt
  email String  @unique
  name  String?
}

model GeoLocation {
  id  Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime? @updatedAt

  city String
  zip String?
  state String?
  stateAbbrev String?

  fips String?
  county String?

  stations Station[]
}
model Station {
  id   String @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime? @updatedAt

  code String @unique

  geoLocations GeoLocation[]

  latitude Float?
  longitude Float?
  elevation Float?

  gsn String?
  hcn String?
  wmoid String?

  stationName String?

  climateEntries ClimateEntry[]
}

model ClimateDataPoint {
  id    String @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime? @updatedAt

  label String
  value String
  flag  String?

  climateEntry ClimateEntry @relation(fields: [climateEntryId], references: [id])
  climateEntryId Int
}
model ClimateEntry {
  id  Int @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime? @updatedAt

  station   Station @relation(fields: [stationId], references: [id])
  stationId   String

  topic     String
  period    String
  dataSet   String

  dataPoints ClimateDataPoint[]
}
model RW_DataMigration {
  version    String   @id
  name       String
  startedAt  DateTime
  finishedAt DateTime
}
model ZipSearch {
  id String @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime? @updatedAt
  zip String
  date DateTime
}
